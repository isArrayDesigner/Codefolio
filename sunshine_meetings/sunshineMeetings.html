<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
	<link rel="stylesheet" type="text/css" href="/Style Library/V7/css/vendor/mdb/addons/datatables.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"/>	
	<script type="text/javascript" src="/Style%20Library/V7/js/vendor/mdb/jquery-3.3.1.min.js"></script>

<style>
	.dataTables_length label {
	    margin-right: 1rem;
	    padding-top: 1rem;
	}
	.dataTables_filter.md-form {
	    margin-top: .55rem;
	}
	.dataTables_filter.md-form input{
	    font-weight: 300;
	}
	.dataTables_wrapper .row {
	    margin-bottom: 1.5rem;
	}
	div.dataTables_wrapper div.dataTables_info {
	    padding-top: 0;
	    padding-bottom: 1rem;
	}
	.dataTables_paginate {
	    float: right;
	}
	.dataTables_filter {
	    float: right;
}
.dataTables_wrapper .dataTables_paginate .paginate_button:active, .dataTables_wrapper .dataTables_paginate .paginate_button:hover, .dataTables_wrapper .dataTables_paginate .paginate_button:focus{
	outline: none!important;
	border:none;
    background-color: white!important;
    background: none!important;
    box-shadow: 0 0 0 0!important;
}

.select-wrapper input.select-dropdown {
	margin-bottom:0px;
	padding-top:15px;
}

div.dataTables_wrapper div.dataTables_length label {
	margin-bottom:0px;
	padding-top:25px;
}
.select-dropdown{
	margin-top: 27px;
}
.select-wrapper span.caret {
    margin-top: 15px;
}
#headerRow{
	background:#1C2A48;
	color:white
}
@media only screen and (max-width:768px){
	#archiveTable_filter{
		width:100%
	}
	#archiveTable_filter input{
		width:100%	
	}
	.dataTables_wrapper .row {
   	 margin-bottom: .5rem;
	}
}
.pagination .page-link:focus {
    background-color: #007bff;
}

@media screen {
  #printSection {
      display: none;
  }
}

@media print {
  body * {
    visibility:hidden;
  }
  .ssk-sticky, .modal-footer{
    display:none;
	}
  #printSection, #printSection * {
    visibility:visible;
  }
  #printSection {
  	font-family:Arial, Helvetica, sans-serif;
  	font-size:1.1rem;
    position:absolute;
    left:0;
    right:0;
    top:0;
  }
  #printSection table td, #printSection table th{
  	font-size:1.1rem !important;
  }

}
.progress-bar{
	background-color: #FFD600 ;
}
</style>
</head>
							<!--<div class="alert alert-warning" role="alert">
							  We are experiencing some technical issues with the Sunshine Meeting Notices. We are working diligently to resolve the issue as soon as possible.
							</div>-->

<div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="result modal" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-info" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title ml-0" id="modalTitle">
						<!--Inject Publication Title-->
					</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
				</div>
				<div class="modal-footer">
				<button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div id="printModal">
	<div class="modal fade" id="noticeModal" tabindex="-1" role="dialog" aria-labelledby="notice modal" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-info" role="document">
			<div class="modal-content" id="forPrinting">
				<div class="modal-header">
						<h5 class="modal-title ml-0" id="aModalTitle">
							<!--Inject Publication Title-->
						</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="container"id="aModalBody">
						<div class="row">
							<div class="col-12 py-3 px-4" id="disclaimer" style="background-color:#eaeaea; border-radius:4px; font-size:.8rem;">
								NOTICE TO MEMBERS OF THE PUBLIC: If you wish to appeal any decision made by the board, agency, or commission, as applicable, with respect to any matter considered at such meeting or hearing, you will need a record of the proceedings. You may thus need to ensure that a verbatim record of the proceedings is made, which record includes the testimony and evidence upon which the appeal is to be based.
							</div>
							<div class="col-12 p-4 my-2" style="border:1px solid #eaeaea; border-radius:4px">
								<div class="row">
									<div class="col-12 col-md-6">
										<p id="date">*</p>
										<p id="time">*</p>
										<p id="location">*</p>
										<p id="room">*</p>
									</div>
									<div class="col-md-6 col-12">
										<p id="purpose">*</p>
										<p id="vendor">*</p>
										<p id="notes">*</p>
										<p id="commissioners">*</p>
									</div>
								</div>
							</div>
							<div class="col-12">
								<h4 style="font-weight:bold!important">Documents <span><i class="far fa-arrow-to-bottom"></i></span></h4>
								<ul class="pl-2" id="documents" style="list-style-type:none">
								</ul>
							</div>
							<div class="col-12">
								<h4 style="font-weight:bold!important">History </h4>
								<div id="history"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer justify-content-between p-4">
				<p class="p-0 m-0"><button type="button" id="printVersion"><span style="font-size:1.5rem"><i class="far fa-print"></i></span> Print full notice</button></p>
				<button type="button" class="btn btn-light noticeClose" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	</div>
<div class="progress">
  <div id="dynamic" class="progress-bar progress-bar-striped progress-bar-animated text-dark" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
    <div class="container" id="tableToMove">
		<table id="archiveTable" class="table table-striped table-bordered table-responsive" cellspacing="0" width="100%">
			<thead id="sHeader">
			</thead>
			<tbody id="sRowItems">
			</tbody>
		</table> 
 	</div>
	<script type="text/javascript" src="/Style%20Library/V7/js/vendor/mdb/jquery-3.3.1.min.js"></script>
	<!--script src="/Style%20Library/V7/WebParts/SunshineMeetings/js/sunshineMeetings.js"></script-->
	<script type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=Element.prototype.cloneNode%2CElement.prototype.after%2CElement.prototype.before%2CElement.prototype.classList%2CElement.prototype.append%2CElement.prototype.previousElementSibling%2CElement.prototype.prepend%2CElement%2Ces6%2Ces5%2Ces2017%2Ces2016%2Ces2015%2CPromise%2CPromise.prototype.finally
"></script>
	<script defer type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script defer type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>  
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
	<script defer type="text/javascript" src="https://cdn.datatables.net/plug-ins/1.10.21/sorting/datetime-moment.js"></script>
	<script type="text/javascript">
$('#fullPageContent > div > div.row.pt-3.mb-r').removeClass('mb-r')
$('#fullPageContent > div > div.row.pt-3').removeClass('pt-3')
$('#tableToMove').hide()
$(document).ready(function () {
  let current_progress = 0
  let interval = setInterval(function () {
    current_progress += 25
    $('#dynamic')
      .css('width', current_progress + '%')
      .attr('aria-valuenow', current_progress)
      .text(current_progress + '% Complete')
    if (current_progress >= 100) clearInterval(interval)
  }, 2000)

  let documentResultsArray = []
  let historyResultsArray = []
  let staticArray = []
  let resultItems
  let documentResults
  let historyResults
  let staticResults
  let documentArray

  let getDocuments = function () {
    // console.log('Get Docs Function')
    let httpRequest
    let url =
      "https://sunshine.broward.org/_api/web/lists/GetByTitle('Sunshine Meetings Documents')/items?$top=2000&$select=Title,ItemID,File&$expand=File"

    httpRequest = new XMLHttpRequest()

    if (!httpRequest) {
      //console.log('Giving up :( Cannot create an XMLHTTP instance')
      return false
    }
    httpRequest.onreadystatechange = resultContents
    httpRequest.open('GET', url)
    httpRequest.setRequestHeader('Accept', 'application/json; odata=verbose')
    httpRequest.send()

    function resultContents () {
      if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        let response = JSON.parse(httpRequest.responseText)
        documentResults = response.d.results

        for (let i = 0; i < documentResults.length; i++) {
          resultItems = documentResults[i]
          documentArray = {}
          documentArray['fileUrl'] = resultItems.File.ServerRelativeUrl
          documentArray['ItemID'] = resultItems.ItemID
          documentArray['Title'] = resultItems.Title
          documentResultsArray.push(documentArray)
        }
        getMeetings()
      } else {
        //console.log('There was a problem with the request.')
      }
    }
  }

  let getMeetings = function () {
    //console.log('Get Meetings Function')
    let httpRequest
    let url =
      "https://sunshine.broward.org/_api/web/lists/GetByTitle('Sunshine Form')/items?$top=2000&$select=Id,Title,Notes,Project,Project_x0020_Number,Location,Vendor,Attending_x0020_Commissioners,Meeting_x0020_Cancelled,MeetingID,Contact_x0020_Name,Contact_x0020_Phone,Agency,Purpose,Room_x002f_Suite_x0020_Number,Committee_x002f_Board,Meeting_x0020_Date,Meeting_x0020_Time,Superseded,SunshineADApproval,Superseded,Modified"

    httpRequest = new XMLHttpRequest()

    if (!httpRequest) {
      //console.log('Giving up :( Cannot create an XMLHTTP instance')
      return false
    }
    httpRequest.onreadystatechange = resultContents
    httpRequest.open('GET', url)
    httpRequest.setRequestHeader('Accept', 'application/json; odata=verbose')
    httpRequest.send()

    function resultContents () {
      if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        let response = JSON.parse(httpRequest.responseText)
        staticResults = response.d.results
        // console.log(results)
        for (let j = 0; j < staticResults.length; j++) {
          resultItems = staticResults[j]
          staticArray.push(resultItems)
          resultItems.Document = []
          resultItems.History = []
        }
        getMeetingHistory()
      } else {
        //console.log('There was a problem with the request.')
      }
    }
  }

  let getMeetingHistory = function () {
    // console.log('Get Meetings Function')
    let httpRequest
    let url =
      "https://sunshine.broward.org/_api/web/lists/GetByTitle('Published')/items?$top=2000&$select=Id,Title,Notes,Project,Project_x0020_Number,Location,Vendor,Attending_x0020_Commissioners,Meeting_x0020_Cancelled,MeetingID,Contact_x0020_Name,Contact_x0020_Phone,Agency,Purpose,Room_x002f_Suite_x0020_Number,Committee_x002f_Board,Meeting_x0020_Date,Meeting_x0020_Time,Superseded,SunshineADApproval,Superseded,Modified"

    httpRequest = new XMLHttpRequest()

    if (!httpRequest) {
      //console.log('Giving up :( Cannot create an XMLHTTP instance')
      return false
    }
    httpRequest.onreadystatechange = resultContents
    httpRequest.open('GET', url)
    httpRequest.setRequestHeader('Accept', 'application/json; odata=verbose')
    httpRequest.send()

    function resultContents () {
      if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        let response = JSON.parse(httpRequest.responseText)
        historyResults = response.d.results
        // console.log(results)
        for (let j = 0; j < historyResults.length; j++) {
          resultItems = historyResults[j]
          historyResultsArray.push(resultItems)
        }
        mergeDocsAndMeetings()
      } else {
        //console.log('There was a problem with the request.')
      }
    }
  }

  let mergeDocsAndMeetings = function () {
    //console.log('Merge Docs Function')
    for (let i = 0; i < documentResultsArray.length; i++) {
      staticArray.forEach(function (result) {
        if (result.MeetingID == documentResultsArray[i].ItemID) {
          result.Document.push(documentResultsArray[i])
        }
      })
    }
    for (let i = 0; i < historyResultsArray.length; i++) {
      staticArray.forEach(function (result) {
        if (result.MeetingID == historyResultsArray[i].MeetingID) {
          result.History.push(historyResultsArray[i])
        }
      })
    }
    // console.log(staticResults)
    //postMessage([JSON.stringify(staticResults, null, ' ')])
    buildTableWrapper()
  }
  getDocuments()

  let buildTableItems = function () {
    console.log('Build Table Items Function')

    for (let i = 0; i < staticResults.length; i++) {
      let resultItems = staticResults[i]
      // console.log(resultItems)
      // replace null results
      Object.keys(resultItems).forEach(function (key) {
        if (resultItems[key] === null) {
          resultItems[key] = ''
        }
      })

      let meetingDate = moment(resultItems.Meeting_x0020_Date).format('LL')
      let meetingTime = moment(resultItems.Meeting_x0020_Time, 'LT').format('h:mm a')
      let projectName =
        resultItems.Project == 'undefined'
          ? ''
          : resultItems.Project + resultItems['Project_x0020_Number']
      let attending = resultItems.Attending_x0020_Commissioners
        ? resultItems.Attending_x0020_Commissioners.results
        : 'None'

      if (moment(meetingDate).isSameOrAfter(moment().format('LL'))) {
        if (
          resultItems.History.length > 1 &&
          resultItems.Meeting_x0020_Cancelled === false
        ) {
          $('#sRowItems').append(
            $('<tr class="white" data-id="' + resultItems.MeetingID + '">')
              .append(
                $(
                  '<td class="attachments text-center align-middle"><a data-toggle="modal" data-target="#noticeModal" data-id="' +
                    resultItems.MeetingID +
                    '" class="fullNotice"><i class="fal fa-file-alt fa-3x"></i></a><br/><a data-toggle="modal" data-target="#resultModal" class="updated btn btn-sm btn-info mt-2 shadow-none">Updated</a></td>'
                )
              )
              .append($('<td>' + resultItems.Contact_x0020_Name + '</td>'))
              .append($('<td>' + resultItems.Contact_x0020_Phone + '</td>'))
              .append($('<td>' + resultItems.Committee_x002f_Board + '</td>'))
              .append($('<td>' + resultItems.Project + '</td>'))
              .append($('<td>' + resultItems.Project_x0020_Number + '</td>'))
              .append(
                $('<td>' + resultItems.Room_x002f_Suite_x0020_Number + '</td>')
              )
              .append($('<td>' + resultItems.Vendor + '</td>'))
              .append($('<td>' + resultItems.Notes + '</td>'))
              .append($('<td>' + attending + '</td>'))

              .append($('<td>' + meetingDate + '</td>'))
              .append($('<td>' + meetingTime + '</td>'))
              .append($('<td>' + resultItems.Agency + '</td>'))
              //.append($('<td>' + resultItems.Vendor + '</td>'))
              .append($('<td>' + resultItems.Purpose + '</td>'))
              .append($('<td>' + resultItems.Location + '</td>'))
          )
        } else if (
          resultItems.History.length > 1 &&
          resultItems.Meeting_x0020_Cancelled === true
        ) {
          $('#sRowItems').append(
            $(
              '<tr class="grey lighten-4 blue-grey-text" data-id="' +
                resultItems.MeetingID +
                '">'
            )
              .append(
                $(
                  '<td class="attachments text-center align-middle"><a data-toggle="modal" data-target="#noticeModal" data-id="' +
                    resultItems.MeetingID +
                    '" class="fullNotice"><i class="fal fa-file-alt fa-3x"></i></a><br/><b>(This meeting has been cancelled)</b></td>'
                )
              )
              .append($('<td>' + resultItems.Contact_x0020_Name + '</td>'))
              .append($('<td>' + resultItems.Contact_x0020_Phone + '</td>'))
              .append($('<td>' + resultItems.Committee_x002f_Board + '</td>'))
              .append($('<td>' + resultItems.Project + '</td>'))
              .append($('<td>' + resultItems.Project_x0020_Number + '</td>'))
              .append(
                $('<td>' + resultItems.Room_x002f_Suite_x0020_Number + '</td>')
              )
              .append($('<td>' + resultItems.Vendor + '</td>'))
              .append($('<td>' + resultItems.Notes + '</td>'))
              .append($('<td>' + attending + '</td>'))

              .append($('<td>' + meetingDate + '</td>'))
              .append($('<td>' + meetingTime + '</td>'))
              .append($('<td>' + resultItems.Agency + '</td>'))
              .append($('<td>' + resultItems.Purpose + '</td>'))
              .append($('<td>' + resultItems.Location + '</td>'))
          )
        } else if (resultItems.Meeting_x0020_Cancelled === true) {
          $('#sRowItems').append(
            $(
              '<tr class="grey lighten-4 blue-grey-text" data-id="' +
                resultItems.MeetingID +
                '">'
            )
              .append(
                $(
                  '<td class="attachments text-center align-middle"><a data-toggle="modal" data-target="#noticeModal" data-id="' +
                    resultItems.MeetingID +
                    '" class="fullNotice"><i class="fal fa-file-alt fa-3x"></i></a><br/><b>(This meeting has been cancelled)</b></td>'
                )
              )
              .append($('<td>' + resultItems.Contact_x0020_Name + '</td>'))
              .append($('<td>' + resultItems.Contact_x0020_Phone + '</td>'))
              .append($('<td>' + resultItems.Committee_x002f_Board + '</td>'))
              .append($('<td>' + resultItems.Project + '</td>'))
              .append($('<td>' + resultItems.Project_x0020_Number + '</td>'))
              .append(
                $('<td>' + resultItems.Room_x002f_Suite_x0020_Number + '</td>')
              )
              .append($('<td>' + resultItems.Vendor + '</td>'))
              .append($('<td>' + resultItems.Notes + '</td>'))
              .append($('<td>' + attending + '</td>'))

              .append($('<td>' + meetingDate + '</td>'))
              .append($('<td>' + meetingTime + '</td>'))
              .append($('<td>' + resultItems.Agency + '</td>'))
              .append($('<td>' + resultItems.Purpose + '</td>'))
              .append($('<td>' + resultItems.Location + '</td>'))
          )
        } else {
          $('#sRowItems').append(
            $('<tr class="white" data-id="' + resultItems.MeetingID + '">')
              .append(
                $(
                  '<td class="attachments text-center align-middle"><a data-toggle="modal" data-target="#noticeModal" data-id="' +
                    resultItems.MeetingID +
                    '" class="fullNotice"><i class="fal fa-file-alt fa-3x"></i></a></td>'
                )
              )
              .append($('<td>' + resultItems.Contact_x0020_Name + '</td>'))
              .append($('<td>' + resultItems.Contact_x0020_Phone + '</td>'))
              .append($('<td>' + resultItems.Committee_x002f_Board + '</td>'))
              .append($('<td>' + resultItems.Project + '</td>'))
              .append($('<td>' + resultItems.Project_x0020_Number + '</td>'))
              .append(
                $('<td>' + resultItems.Room_x002f_Suite_x0020_Number + '</td>')
              )
              .append($('<td>' + resultItems.Vendor + '</td>'))
              .append($('<td>' + resultItems.Notes + '</td>'))
              .append($('<td>' + attending + '</td>'))

              .append($('<td>' + meetingDate + '</td>'))
              .append($('<td>' + meetingTime + '</td>'))
              .append($('<td>' + resultItems.Agency + '</td>'))
              .append($('<td>' + resultItems.Purpose + '</td>'))
              .append($('<td>' + resultItems.Location + '</td>'))
          )
        }
      }
    }
  }

  let initDataTable = function () {
    console.log('Init Data Table Function')

    $.fn.dataTable.moment('LL')
    $.fn.dataTable.moment('h:mm a')

    $('#archiveTable').DataTable({
      responsive: true,
      order: [
        [10, 'asc'],
        [11, 'asc']
      ],
      columnDefs: [
        { searchable: true, visible: false, targets: [1] },
        { searchable: true, visible: false, targets: [2] },
        { searchable: true, visible: false, targets: [3] },
        { searchable: true, visible: false, targets: [4] },
        { searchable: true, visible: false, targets: [5] },
        { searchable: true, visible: false, targets: [6] },
        { searchable: true, visible: false, targets: [7] },
        { searchable: true, visible: false, targets: [8] },
        { searchable: true, visible: false, targets: [9] }
      ]
    })

    $('.dataTables_wrapper')
      .find('label')
      .each(function () {
        $(this)
          .parent()
          .append($(this).children())
      })

    $('.dataTables_filter')
      .find('input')
      .each(function () {
        $('input').attr('placeholder', 'Search')
        $('input')
          .removeClass('form-control-sm')
          .addClass('w-75')
      })
    $('.dataTables_filter').addClass('w-100')
    $('.dataTables_length').addClass('d-flex flex-row')
    // $('.dataTables_filter').addClass('md-form');
    $('select').addClass('mdb-select')
    $('.mdb-select').material_select()
    $('.mdb-select').removeClass(
      'form-control form-control-sm custom-select custom-select-sm'
    )
    $('.dataTables_filter')
      .find('label')
      .remove()
    $('#archiveTable_length > label').hide()
    $('#archiveTable_wrapper .select-wrapper').hide()
  }

  let buildTableWrapper = function () {
    console.log('Build Table Wrapper Function')

    let sHeader = $('#sHeader')
    sHeader.append($('<tr id="headerRow">'))

    let sHeaderRow = $('#headerRow')
    sHeaderRow.append(
      $(
        '<th class="th-sm">View Full Notice</th>' +
          '<th class="th-sm">Contact Name</th>' +
          '<th class="th-sm">Contact Phone</th>' +
          '<th class="th-sm">Committee/board</th>' +
          '<th class="th-sm">Project Type</th>' +
          '<th class="th-sm">Project Number</th>' +
          '<th class="th-sm">Room/Suite Number</th>' +
          '<th class="th-sm">Vendor</th>' +
          '<th class="th-sm">Notes</th>' +
          '<th class="th-sm">Attending Commissioners</th>' +
          '<th class="th-sm">Meeting Date</th>' +
          '<th class="th-sm">Meeting Time</th>' +
          '<th class="th-sm">Agency</th>' +
          '<th class="th-sm">Purpose</th>' +
          '<th class="th-sm">Location</th>'
      )
    )

    $.when(buildTableItems()).done(initDataTable)

    $('body').on('click', '.updated', function () {
      $('#resultModal .modal-body').empty()
      $('#resultModal .modal-body').append(
        '<table id="modalTable" class="table table-striped table-bordered table-responsive" cellspacing="0"></table>'
      )
      let id = $(this)
        .parent()
        .parent()
        .attr('data-id')

      $('#modalTable').append(
        $(
          '<thead id="modalHeaders">' +
            '<th class="th-sm">Meeting Date</th>' +
            '<th class="th-sm">Meeting Time</th>' +
            '<th class="th-sm">Agency</th>' +
            '<th class="th-sm">Project Name</th>' +
            '<th class="th-lg">Location</th>' +
            '<th class="th-lg">Modified Date</th></thead>'
        )
      )
      for (let i = 0; i < staticResults.length; i++) {
        let resultItems = staticResults[i]
        //console.log(resultItems)

        if (resultItems.MeetingID == id) {
          let historyResults = resultItems.History
          for (let j = 0; j < historyResults.length; j++) {
            let historyItems = historyResults[j]
            let meetingStatus = historyItems.Meeting_x0020_Cancelled
              ? 'Meeting Cancelled'
              : 'Meeting Scheduled'

            let meetingDate = moment(historyItems.Meeting_x0020_Date).format(
              'LL'
            )
            let meetingTime = moment(historyItems.Meeting_x0020_Time, 'LT').format('h:mm a')
            let projectName = historyItems.Project
              ? historyItems.Project + historyItems['Project_x0020_Number']
              : ''

            $('#modalTitle').html(historyItems.Agency)
            $('#modalTable').append(
              $('<tbody id="modalRowItems"></tbody>').append(
                $('<tr data-id="' + historyItems.MeetingID + '">')
                  .append(
                    $(
                      '<td>' +
                        meetingDate +
                        '<br><i>' +
                        meetingStatus +
                        '</i></td>'
                    )
                  )
                  .append($('<td>' + meetingTime + '</td>'))
                  .append($('<td>' + historyItems.Agency + '</td>'))
                  .append($('<td>' + projectName + '</td>'))
                  .append($('<td>' + historyItems.Location + '</td>'))
                  .append(
                    $(
                      '<td>' +
                        moment(historyItems.Modified).format(
                          'MM/DD/YYYY hh:mm'
                        ) +
                        '</td>'
                    )
                  )
              )
            )
          }
        }
      }
    })

    //Printer Friendly
    document.getElementById('printVersion').onclick = function () {
      printElement(document.getElementById('forPrinting'))
    }

    function printElement (elem) {
      var domClone = elem.cloneNode(true)

      var $printSection = document.getElementById('printSection')

      if (!$printSection) {
        var $printSection = document.createElement('div')
        $printSection.id = 'printSection'
        document.body.appendChild($printSection)
      }

      $printSection.innerHTML = ''
      $printSection.appendChild(domClone)
      window.print()
    }

    $('body').on('click', '.fullNotice', function () {
      $('#documents, #history').empty()
      let id = $(this).attr('data-id')

      for (let i = 0; i < staticResults.length; i++) {
        let resultItems = staticResults[i]

        if (resultItems.MeetingID == id) {
          let attachResults = resultItems.Document
          let historyResults = resultItems.History
          let meetingDate = moment(resultItems.Meeting_x0020_Date).format('LL')
          let meetingTime = moment(resultItems.Meeting_x0020_Time, 'LT').format('h:mm a')
          
          let attending = resultItems.Attending_x0020_Commissioners
            ? resultItems.Attending_x0020_Commissioners.results
            : 'None'

          $('#aModalTitle').html(resultItems.Title)
          $('#date').html(
            '<span class="font-weight-bold">Date: </span>' + meetingDate
          )
          $('#time').html(
            '<span class="font-weight-bold">Time: </span>' + meetingTime
          )
          $('#location').html(
            '<span class="font-weight-bold">Location: </span>' +
              resultItems.Location
          )
          $('#room').html(
            '<span class="font-weight-bold">Room/Suite #: </span>' +
              resultItems.Room_x002f_Suite_x0020_Number
          )
          $('#purpose').html(
            '<span class="font-weight-bold">Purpose: </span>' +
              resultItems.Purpose
          )
          $('#vendor').html(
            '<span class="font-weight-bold">Vendor: </span>' +
              resultItems.Vendor
          )
          $('#notes').html(
            '<span class="font-weight-bold">Notes: </span>' + resultItems.Notes
          )
          $('#commissioners').html(
            '<span class="font-weight-bold">Attending Commissioners: </span>' +
              attending
          )

          for (let j = 0; j < attachResults.length; j++) {
            let attachItems = attachResults[j]
            $('#documents').append(
              $(
                '<li><i class="fal fa-paperclip"></i><a href="https://sunshine.broward.org' +
                  attachItems.fileUrl +
                  '" target="_blank"> ' +
                  attachItems.Title +
                  '</a></li>'
              )
            )
          }
          if (historyResults.length > 0) {
            $('#history').append(
              '<table id="historyModalTable" class="table table-striped table-bordered table-responsive" cellspacing="0"></table>'
            )
            $('#historyModalTable').append(
              $(
                '<thead id="historyModalHeaders">' +
                  '<th class="th-sm">Meeting Date</th>' +
                  '<th class="th-sm">Meeting Time</th>' +
                  '<th class="th-sm">Agency</th>' +
                  '<th class="th-sm">Project Name</th>' +
                  '<th class="th-lg">Location</th>' +
                  '<th class="th-lg">Modified Date</th></thead>'
              )
            )
            for (let j = 0; j < historyResults.length; j++) {
              let historyItems = historyResults[j]
              let meetingStatus = historyItems.Meeting_x0020_Cancelled
                ? 'Meeting Cancelled'
                : 'Meeting Scheduled'

              let hMeetingDate = moment(historyItems.Meeting_x0020_Date).format(
                'LL'
              )
              let hMeetingTime = moment(historyItems.Meeting_x0020_Time, 'LT').format('h:mm a')
              let projectName = historyItems.Project
                ? historyItems.Project + historyItems['Project_x0020_Number']
                : ''

              $('#historyModalTable').append(
                $('<tbody id="historyModalRowItems"></tbody>').append(
                  $('<tr data-id="' + historyItems.MeetingID + '">')
                    .append(
                      $(
                        '<td>' +
                          hMeetingDate +
                          '<br><i>' +
                          meetingStatus +
                          '</i></td>'
                      )
                    )
                    .append($('<td>' + hMeetingTime + '</td>'))
                    .append($('<td>' + historyItems.Agency + '</td>'))
                    .append($('<td>' + projectName + '</td>'))
                    .append($('<td>' + historyItems.Location + '</td>'))
                    .append(
                      $(
                        '<td>' +
                          moment(historyItems.Modified).format(
                            'MM/DD/YYYY hh:mm'
                          ) +
                          '</td>'
                      )
                    )
                )
              )
            }
          }
        }
      }
    })
    // $('#fullPageContent > div:nth-child(1) > div.row > div').hide();
    let webpartMove = $('#tableToMove')
    webpartMove.detach()
    webpartMove.appendTo('#fullPageContent')
  }
  setTimeout(function () {
    $('.progress').hide()
    $('#tableToMove').fadeIn('slow')
    //document.getElementById("tableToMove").scrollIntoView();
  }, 5000)
})

	</script>
	

</html>